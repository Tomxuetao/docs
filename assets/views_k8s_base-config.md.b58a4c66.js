import{_ as s,o as a,c as n,Q as l}from"./chunks/framework.ca65985f.js";const h=JSON.parse('{"title":"操作系统基础配置","description":"","frontmatter":{"outline":"deep"},"headers":[],"relativePath":"views/k8s/base-config.md","filePath":"views/k8s/base-config.md","lastUpdated":1693909462000}'),o={name:"views/k8s/base-config.md"},p=l(`<h1 id="操作系统基础配置" tabindex="-1">操作系统基础配置 <a class="header-anchor" href="#操作系统基础配置" aria-label="Permalink to &quot;操作系统基础配置&quot;">​</a></h1><p>进行一些基础的配置，为搭建 <code>K8s</code> 环境做准备。基础环境的配置需要在所有 <code>K8s</code> 集群节点上执行，本文选取 <code>k8s-master-1</code> 节点作为演示。</p><div class="tip custom-block"><p class="custom-block-title">提示</p><p>其余 <code>K8s</code> 集群节点参照本文档进行相应的更改执行相关操作。</p></div><h2 id="配置主机名" tabindex="-1">配置主机名 <a class="header-anchor" href="#配置主机名" aria-label="Permalink to &quot;配置主机名&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 更改主机名称</span></span>
<span class="line"><span style="color:#B392F0;">hostnamectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">set-hostname</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">k8s-master-1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 切入新会话，验证修改主机名称是否成功</span></span>
<span class="line"><span style="color:#B392F0;">bash</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 更改主机名称</span></span>
<span class="line"><span style="color:#6F42C1;">hostnamectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">set-hostname</span><span style="color:#24292E;"> </span><span style="color:#032F62;">k8s-master-1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 切入新会话，验证修改主机名称是否成功</span></span>
<span class="line"><span style="color:#6F42C1;">bash</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">提示</p><p><code>master</code> 节点的主机名前缀使用 <code>k8s-master-</code></p><p><code>worker</code> 节点的主机名前缀使用 <code>k8s-worker-</code></p></div><h2 id="配置-dns" tabindex="-1">配置 DNS <a class="header-anchor" href="#配置-dns" aria-label="Permalink to &quot;配置 DNS&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#79B8FF;">echo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;nameserver 114.114.114.114&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/resolv.conf</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#005CC5;">echo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;nameserver 114.114.114.114&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/resolv.conf</span></span></code></pre></div><h2 id="配置服务器时区" tabindex="-1">配置服务器时区 <a class="header-anchor" href="#配置服务器时区" aria-label="Permalink to &quot;配置服务器时区&quot;">​</a></h2><p>配置服务器时区为 <code>Asia/Shanghai</code></p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">timedatectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">set-timezone</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Asia/Shanghai</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">timedatectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">set-timezone</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Asia/Shanghai</span></span></code></pre></div><p>查看服务器时区</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">timedatectl</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">timedatectl</span></span></code></pre></div><p>输出如下：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@k8s-master-1 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# timedatectl</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">Local</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">time:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Tue</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2023</span><span style="color:#9ECBFF;">-09-05</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">17</span><span style="color:#9ECBFF;">:18:54</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">CST</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">Universal</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">time:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Tue</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2023</span><span style="color:#9ECBFF;">-09-05</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">09</span><span style="color:#9ECBFF;">:18:54</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">UTC</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">RTC</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">time:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Tue</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2023</span><span style="color:#9ECBFF;">-09-05</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">09</span><span style="color:#9ECBFF;">:18:53</span></span>
<span class="line"><span style="color:#E1E4E8;">       </span><span style="color:#B392F0;">Time</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">zone:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Asia/Shanghai</span><span style="color:#E1E4E8;"> (CST, </span><span style="color:#9ECBFF;">+0800</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">     </span><span style="color:#B392F0;">NTP</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">enabled:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">yes</span></span>
<span class="line"><span style="color:#B392F0;">NTP</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">synchronized:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">yes</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">RTC</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">in</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">local</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">TZ:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">no</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">DST</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">active:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">n/a</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@k8s-master-1 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# timedatectl</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">Local</span><span style="color:#24292E;"> </span><span style="color:#032F62;">time:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Tue</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2023</span><span style="color:#032F62;">-09-05</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">17</span><span style="color:#032F62;">:18:54</span><span style="color:#24292E;"> </span><span style="color:#032F62;">CST</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">Universal</span><span style="color:#24292E;"> </span><span style="color:#032F62;">time:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Tue</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2023</span><span style="color:#032F62;">-09-05</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">09</span><span style="color:#032F62;">:18:54</span><span style="color:#24292E;"> </span><span style="color:#032F62;">UTC</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">RTC</span><span style="color:#24292E;"> </span><span style="color:#032F62;">time:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Tue</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2023</span><span style="color:#032F62;">-09-05</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">09</span><span style="color:#032F62;">:18:53</span></span>
<span class="line"><span style="color:#24292E;">       </span><span style="color:#6F42C1;">Time</span><span style="color:#24292E;"> </span><span style="color:#032F62;">zone:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Asia/Shanghai</span><span style="color:#24292E;"> (CST, </span><span style="color:#032F62;">+0800</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">     </span><span style="color:#6F42C1;">NTP</span><span style="color:#24292E;"> </span><span style="color:#032F62;">enabled:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">yes</span></span>
<span class="line"><span style="color:#6F42C1;">NTP</span><span style="color:#24292E;"> </span><span style="color:#032F62;">synchronized:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">yes</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">RTC</span><span style="color:#24292E;"> </span><span style="color:#032F62;">in</span><span style="color:#24292E;"> </span><span style="color:#032F62;">local</span><span style="color:#24292E;"> </span><span style="color:#032F62;">TZ:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">no</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">DST</span><span style="color:#24292E;"> </span><span style="color:#032F62;">active:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">n/a</span></span></code></pre></div><h2 id="配置时间同步" tabindex="-1">配置时间同步 <a class="header-anchor" href="#配置时间同步" aria-label="Permalink to &quot;配置时间同步&quot;">​</a></h2><h2 id="关闭系统防火墙" tabindex="-1">关闭系统防火墙 <a class="header-anchor" href="#关闭系统防火墙" aria-label="Permalink to &quot;关闭系统防火墙&quot;">​</a></h2><h2 id="禁用-selinux" tabindex="-1">禁用 SELinux <a class="header-anchor" href="#禁用-selinux" aria-label="Permalink to &quot;禁用 SELinux&quot;">​</a></h2><h2 id="安装系统依赖" tabindex="-1">安装系统依赖 <a class="header-anchor" href="#安装系统依赖" aria-label="Permalink to &quot;安装系统依赖&quot;">​</a></h2><h2 id="配置基于-ssh-密钥" tabindex="-1">配置基于 SSH 密钥 <a class="header-anchor" href="#配置基于-ssh-密钥" aria-label="Permalink to &quot;配置基于 SSH 密钥&quot;">​</a></h2>`,20),e=[p];function t(c,r,y,E,i,F){return a(),n("div",null,e)}const C=s(o,[["render",t]]);export{h as __pageData,C as default};

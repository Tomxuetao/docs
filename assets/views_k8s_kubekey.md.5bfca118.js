import{_ as e,o as s,c as a,Q as l}from"./chunks/framework.ca65985f.js";const d=JSON.parse('{"title":"KubeKey","description":"","frontmatter":{"outline":"deep"},"headers":[],"relativePath":"views/k8s/kubekey.md","filePath":"views/k8s/kubekey.md","lastUpdated":1694171468000}'),t={name:"views/k8s/kubekey.md"},o=l('<h1 id="kubekey" tabindex="-1">KubeKey <a class="header-anchor" href="#kubekey" aria-label="Permalink to &quot;KubeKey&quot;">​</a></h1><p><a href="https://github.com/kubesphere/kubekey" target="_blank" rel="noreferrer"><code>KubeKey</code></a>（由 Go 语言开发）是一种全新的安装工具，替代了以前使用的基于 ansible 的安装程序。KubeKey 为您提供灵活的安装选择，您可以仅安装 Kubernetes，也可以同时安装 Kubernetes 和 KubeSphere。</p><h2 id="kubekey-的几种使用场景" tabindex="-1">KubeKey 的几种使用场景 <a class="header-anchor" href="#kubekey-的几种使用场景" aria-label="Permalink to &quot;KubeKey 的几种使用场景&quot;">​</a></h2><ul><li>仅安装 Kubernetes；</li><li>使用一个命令同时安装 Kubernetes 和 KubeSphere；</li><li>扩缩集群；</li><li>升级集群；</li><li>安装 Kubernetes 相关的插件（Chart 或 YAML）。</li></ul><h2 id="kubekey-如何运作" tabindex="-1">KubeKey 如何运作 <a class="header-anchor" href="#kubekey-如何运作" aria-label="Permalink to &quot;KubeKey 如何运作&quot;">​</a></h2><p>下载 KubeKey 之后，您可以使用可执行文件 kk 来进行不同的操作。无论您是使用它来创建，扩缩还是升级集群，都必须事先使用 kk 准备配置文件。此配置文件包含集群的基本参数，例如主机信息、网络配置（CNI 插件以及 Pod 和 Service CIDR）、仓库镜像、插件（YAML 或 Chart）和可插拔组件选项（如果您安装 KubeSphere）。有关更多信息，请参见示<a href="https://github.com/kubesphere/kubekey/blob/release-2.2/docs/config-example.md" target="_blank" rel="noreferrer">例配置文件</a>。</p><p>准备好配置文件后，您需要使用 ./kk 命令以及不同的标志来进行不同的操作。这之后，KubeKey 会自动安装 Docker，并拉取所有必要的镜像以进行安装。安装完成后，您还可以检查安装日志。</p><h2 id="为什么选择-kubekey" tabindex="-1">为什么选择 KubeKey <a class="header-anchor" href="#为什么选择-kubekey" aria-label="Permalink to &quot;为什么选择 KubeKey&quot;">​</a></h2><ul><li>以前基于 ansible 的安装程序依赖于许多软件，例如 Python。KubeKey 由 Go 语言开发，可以消除在多种环境中出现的问题，确保成功安装。</li><li>KubeKey 支持多种安装选项，例如 <a href="https://www.kubesphere.io/zh/docs/v3.3/quick-start/all-in-one-on-linux/" target="_blank" rel="noreferrer">All-in-One</a>、<a href="https://www.kubesphere.io/zh/docs/v3.3/installing-on-linux/introduction/multioverview/" target="_blank" rel="noreferrer">多节点安装</a> 以及<a href="https://www.kubesphere.io/zh/docs/v3.3/installing-on-linux/introduction/air-gapped-installation/" target="_blank" rel="noreferrer">离线安装</a>。</li><li>KubeKey 使用 Kubeadm 在节点上尽可能多地并行安装 Kubernetes 集群，使安装更简便，提高效率。与旧版的安装程序相比，它极大地节省了安装时间。</li><li>KubeKey 提供<a href="https://www.kubesphere.io/zh/docs/v3.3/installing-on-linux/high-availability-configurations/internal-ha-configuration/" target="_blank" rel="noreferrer">内置高可用模式</a> ，支持一键安装高可用 Kubernetes 集群。</li><li>KubeKey 旨在将集群作为对象来进行安装，即 CaaO。</li></ul><h2 id="下载-kubekey" tabindex="-1">下载 KubeKey <a class="header-anchor" href="#下载-kubekey" aria-label="Permalink to &quot;下载 KubeKey&quot;">​</a></h2><h3 id="如果你能访问github" tabindex="-1">如果你能访问GitHub <a class="header-anchor" href="#如果你能访问github" aria-label="Permalink to &quot;如果你能访问GitHub&quot;">​</a></h3><p>从 <a href="https://github.com/kubesphere/kubekey/releases" target="_blank" rel="noreferrer">GitHub Release Page</a> 下载 KubeKey 或者直接运行以下命令。</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">curl</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-sfLv</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://get-kk.kubesphere.io</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> VERSION</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">v3.0.9</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">sh</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">-</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">curl</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-sfLv</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://get-kk.kubesphere.io</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> VERSION</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">v3.0.9</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">sh</span><span style="color:#24292E;"> </span><span style="color:#032F62;">-</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">提示</p><p>通过以上的命令，可以下载 KubeKey 的最新版本。您可以更改命令中的版本号来下载特定的版本。</p></div><h3 id="如果你访问github受限" tabindex="-1">如果你访问GitHub受限 <a class="header-anchor" href="#如果你访问github受限" aria-label="Permalink to &quot;如果你访问GitHub受限&quot;">​</a></h3><p>首先运行以下命令，以确保您从正确的区域下载 KubeKey。</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> KKZONE</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">cn</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> KKZONE</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">cn</span></span></code></pre></div><p>运行以下命令来下载 KubeKey：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">curl</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-sfL</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://get-kk.kubesphere.io</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> VERSION</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">v3.0.9</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">sh</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">-</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">curl</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-sfL</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://get-kk.kubesphere.io</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> VERSION</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">v3.0.9</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">sh</span><span style="color:#24292E;"> </span><span style="color:#032F62;">-</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">提示</p><p>下载 KubeKey 之后，如果您将其转移到访问 Googleapis 受限的新机器上，请务必再次运行 export KKZONE=cn，然后继续执行以下步骤。</p></div><h2 id="支持矩阵" tabindex="-1">支持矩阵 <a class="header-anchor" href="#支持矩阵" aria-label="Permalink to &quot;支持矩阵&quot;">​</a></h2><p>若需使用 KubeKey 来安装 Kubernetes 和 KubeSphere 3.3，请参见下表以查看所有受支持的 Kubernetes 版本。</p><table><thead><tr><th>KubeSphere 版本</th><th>受支持的 Kubernetes 版本</th></tr></thead><tbody><tr><td>v3.3</td><td>v1.20.x、v1.21.x、* v1.22.x、* v1.23.x 和 * v1.24.x</td></tr></tbody></table><div class="tip custom-block"><p class="custom-block-title">提示</p><ul><li>您也可以运行 ./kk version --show-supported-k8s，查看能使用 KubeKey 安装的所有受支持的 Kubernetes 版本。</li><li>能使用 KubeKey 安装的 Kubernetes 版本与 KubeSphere 3.3 支持的 Kubernetes 版本不同。如需<a href="https://www.kubesphere.io/zh/docs/v3.3/installing-on-kubernetes/introduction/overview/" target="_blank" rel="noreferrer">在现有 Kubernetes 集群上安装 KubeSphere 3.3</a> ，您的 Kubernetes 版本必须为 v1.20.x、v1.21.x、* v1.22.x、* v1.23.x 和 * v1.24.x。</li><li>带星号的版本可能出现边缘节点部分功能不可用的情况。因此，如果您需要使用 KubeEdge，为了避免兼容性问题，建议安装 v1.21.x 版本的 Kubernetes。</li></ul></div>',24),n=[o];function r(p,i,c,u,b,h){return s(),a("div",null,n)}const k=e(t,[["render",r]]);export{d as __pageData,k as default};

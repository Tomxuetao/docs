# Matcher

createRouterMatcher是vue-router中的一个重要函数,它用于创建路由匹配器(route matcher)。

## 类型

```ts
export interface RouterMatcher {
  addRoute: (record: RouteRecordRaw, parent?: RouteRecordMatcher) => () => void
  removeRoute: {
    (matcher: RouteRecordMatcher): void
    (name: RouteRecordName): void
  }
  getRoutes: () => RouteRecordMatcher[]
  getRecordMatcher: (name: RouteRecordName) => RouteRecordMatcher | undefined

  /**
   * Resolves a location. Gives access to the route record that corresponds to the actual path as well as filling the corresponding params objects
   *
   * @param location - MatcherLocationRaw to resolve to a url
   * @param currentLocation - MatcherLocation of the current location
   */
  resolve: (
    location: MatcherLocationRaw,
    currentLocation: MatcherLocation
  ) => MatcherLocation
}
```

## 主要作用

其主要作用是:

- 接收 routes 配置和 options 参数
- 调用 addRoute 递归处理配置,生成路由记录的匹配器 matcher
- 保存命名路由与 matcher 映射在 matcherMap 中
- 按得分排序生成 matcher 数组 matchers
- 创建路由解析方法 resolve
- 返回一个对象,包含以下方法:
  - addRoute:添加路由记录
  - resolve:解析路由位置
  - removeRoute:删除路由记录
  - getRoutes:获取路由记录列表
  - getRecordMatcher:获取单个路由记录的匹配器

::alert{type="info"}
需要注意的是
- matcher 对象仅在 createRouter 内部被创建和使用
- matcher 提供了后续路由匹配与解析的能力
- router 实例内部调用 matcher 的逻辑主要通过闭包实现,并没有通过实例属性访问
::

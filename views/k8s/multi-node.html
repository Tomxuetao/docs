<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>多节点安装 | Tomxuetao</title>
    <meta name="description" content="前端文档|JavaScript|WebGIS|地图|K8s">
    <link rel="preload stylesheet" href="/docs/assets/style.62d0bae3.css" as="style">
    
    <script type="module" src="/docs/assets/app.f4824e94.js"></script>
    <link rel="preload" href="/docs/assets/inter-roman-latin.2ed14f66.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/docs/assets/chunks/framework.ca65985f.js">
    <link rel="modulepreload" href="/docs/assets/chunks/theme.22c83914.js">
    <link rel="modulepreload" href="/docs/assets/views_k8s_multi-node.md.0822457a.lean.js">
    <link rel="icon" href="/docs/favicon.webp">
    <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-8ec523c0><!--[--><!--]--><!--[--><span tabindex="-1" data-v-4091b513></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-4091b513> Skip to content </a><!--]--><!----><header class="VPNav" data-v-8ec523c0 data-v-f2b93b91><div class="VPNavBar has-sidebar" data-v-f2b93b91 data-v-044d67fc><div class="container" data-v-044d67fc><div class="title" data-v-044d67fc><div class="VPNavBarTitle has-sidebar" data-v-044d67fc data-v-460f4b93><a class="title" href="/docs/" data-v-460f4b93><!--[--><!--]--><!--[--><img class="VPImage logo" src="/docs/favicon.webp" alt data-v-c314e366><!--]--><!--[-->Tomxuetao<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-044d67fc><div class="curtain" data-v-044d67fc></div><div class="content-body" data-v-044d67fc><!--[--><!--]--><div class="VPNavBarSearch search" style="--vp-meta-key:&#39;Meta&#39;;" data-v-044d67fc><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg class="DocSearch-Search-Icon" width="20" height="20" viewBox="0 0 20 20" aria-label="search icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-044d67fc data-v-2623a485><span id="main-nav-aria-label" class="visually-hidden" data-v-2623a485>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/docs/views/front" tabindex="0" data-v-2623a485 data-v-91fa81d2><!--[--><span data-v-91fa81d2>前端基础</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/docs/views/vue" tabindex="0" data-v-2623a485 data-v-91fa81d2><!--[--><span data-v-91fa81d2>Vue相关</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/docs/views/gis" tabindex="0" data-v-2623a485 data-v-91fa81d2><!--[--><span data-v-91fa81d2>WebGIS</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/docs/views/axios" tabindex="0" data-v-2623a485 data-v-91fa81d2><!--[--><span data-v-91fa81d2>请求工具</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/docs/views/k8s/kubekey" tabindex="0" data-v-2623a485 data-v-91fa81d2><!--[--><span data-v-91fa81d2>K8s搭建</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-044d67fc data-v-5f25b057><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-5f25b057 data-v-abfae51d data-v-a2797ac8><span class="check" data-v-a2797ac8><span class="icon" data-v-a2797ac8><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-abfae51d><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-abfae51d><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-044d67fc data-v-6ca7639f data-v-f979f749><!--[--><a class="VPSocialLink no-icon" href="https://github.com/Tomxuetao" aria-label="github" target="_blank" rel="noopener" data-v-f979f749 data-v-995ceb15><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-044d67fc data-v-53649661 data-v-6f568302><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-6f568302><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-6f568302><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-6f568302><div class="VPMenu" data-v-6f568302 data-v-880337be><!----><!--[--><!--[--><!----><div class="group" data-v-53649661><div class="item appearance" data-v-53649661><p class="label" data-v-53649661>Appearance</p><div class="appearance-action" data-v-53649661><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-53649661 data-v-abfae51d data-v-a2797ac8><span class="check" data-v-a2797ac8><span class="icon" data-v-a2797ac8><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-abfae51d><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-abfae51d><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-53649661><div class="item social-links" data-v-53649661><div class="VPSocialLinks social-links-list" data-v-53649661 data-v-f979f749><!--[--><a class="VPSocialLink no-icon" href="https://github.com/Tomxuetao" aria-label="github" target="_blank" rel="noopener" data-v-f979f749 data-v-995ceb15><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-044d67fc data-v-9f0d40cc><span class="container" data-v-9f0d40cc><span class="top" data-v-9f0d40cc></span><span class="middle" data-v-9f0d40cc></span><span class="bottom" data-v-9f0d40cc></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav reached-top" data-v-8ec523c0 data-v-081723c1><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-081723c1><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-081723c1><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-081723c1>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-081723c1 data-v-5622c45a><button data-v-5622c45a>Return to top</button><!----></div></div><aside class="VPSidebar" data-v-8ec523c0 data-v-17f12127><div class="curtain" data-v-17f12127></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-17f12127><span class="visually-hidden" id="sidebar-aria-label" data-v-17f12127> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-17f12127><section class="VPSidebarItem level-0 has-active" data-v-17f12127 data-v-ae94dbbc><div class="item" role="button" tabindex="0" data-v-ae94dbbc><div class="indicator" data-v-ae94dbbc></div><h2 class="text" data-v-ae94dbbc>KubeKey</h2><!----></div><div class="items" data-v-ae94dbbc><!--[--><div class="VPSidebarItem level-1 is-link" data-v-ae94dbbc data-v-ae94dbbc><div class="item" data-v-ae94dbbc><div class="indicator" data-v-ae94dbbc></div><a class="VPLink link link" href="/docs/views/k8s/kubekey" data-v-ae94dbbc><!--[--><p class="text" data-v-ae94dbbc>KubeKey简介</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ae94dbbc data-v-ae94dbbc><div class="item" data-v-ae94dbbc><div class="indicator" data-v-ae94dbbc></div><a class="VPLink link link" href="/docs/views/k8s/multi-node" data-v-ae94dbbc><!--[--><p class="text" data-v-ae94dbbc>多节点安装</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ae94dbbc data-v-ae94dbbc><div class="item" data-v-ae94dbbc><div class="indicator" data-v-ae94dbbc></div><a class="VPLink link link" href="/docs/views/k8s/booster" data-v-ae94dbbc><!--[--><p class="text" data-v-ae94dbbc>配置加速器</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ae94dbbc data-v-ae94dbbc><div class="item" data-v-ae94dbbc><div class="indicator" data-v-ae94dbbc></div><a class="VPLink link link" href="/docs/views/k8s/cluster-config" data-v-ae94dbbc><!--[--><p class="text" data-v-ae94dbbc>K8s集群配置</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-17f12127><section class="VPSidebarItem level-0" data-v-17f12127 data-v-ae94dbbc><div class="item" role="button" tabindex="0" data-v-ae94dbbc><div class="indicator" data-v-ae94dbbc></div><h2 class="text" data-v-ae94dbbc>Kubeadm</h2><!----></div><div class="items" data-v-ae94dbbc><!--[--><div class="VPSidebarItem level-1 is-link" data-v-ae94dbbc data-v-ae94dbbc><div class="item" data-v-ae94dbbc><div class="indicator" data-v-ae94dbbc></div><a class="VPLink link link" href="/docs/views/k8s/index" data-v-ae94dbbc><!--[--><p class="text" data-v-ae94dbbc>Kubeadm简介</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ae94dbbc data-v-ae94dbbc><div class="item" data-v-ae94dbbc><div class="indicator" data-v-ae94dbbc></div><a class="VPLink link link" href="/docs/views/k8s/quick-start" data-v-ae94dbbc><!--[--><p class="text" data-v-ae94dbbc>快速上手</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-8ec523c0 data-v-b6ceabc3><div class="VPDoc has-sidebar has-aside" data-v-b6ceabc3 data-v-6e18ff79><!--[--><!--]--><div class="container" data-v-6e18ff79><div class="aside" data-v-6e18ff79><div class="aside-curtain" data-v-6e18ff79></div><div class="aside-container" data-v-6e18ff79><div class="aside-content" data-v-6e18ff79><div class="VPDocAside" data-v-6e18ff79 data-v-143c3e45><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" role="navigation" data-v-143c3e45 data-v-7ccc4ea8><div class="content" data-v-7ccc4ea8><div class="outline-marker" data-v-7ccc4ea8></div><div class="outline-title" role="heading" data-v-7ccc4ea8>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-7ccc4ea8><span class="visually-hidden" id="doc-outline-aria-label" data-v-7ccc4ea8> Table of Contents for current page </span><ul class="root" data-v-7ccc4ea8 data-v-f1a2b52a><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-143c3e45></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-6e18ff79><div class="content-container" data-v-6e18ff79><!--[--><!--]--><!----><main class="main" data-v-6e18ff79><div style="position:relative;" class="vp-doc _docs_views_k8s_multi-node" data-v-6e18ff79><div><h1 id="多节点安装" tabindex="-1">多节点安装 <a class="header-anchor" href="#多节点安装" aria-label="Permalink to &quot;多节点安装&quot;">​</a></h1><p>在生产环境中，由于单节点集群资源有限、计算能力不足，无法满足大部分需求，因此不建议在处理大规模数据时使用单节点集群。此外，单节点集群只有一个节点，因此也不具有高可用性。相比之下，在应用程序部署和分发方面，多节点架构是最常见的首选架构。</p><h2 id="视频演示" tabindex="-1">视频演示 <a class="header-anchor" href="#视频演示" aria-label="Permalink to &quot;视频演示&quot;">​</a></h2><br><video controls src="https://kubesphere-docs.pek3b.qingstor.com/website/docs-v3.0/KS3.0%E5%AE%89%E8%A3%85%E4%B8%8E%E9%83%A8%E7%BD%B2_2_Multi-Node%20Deployment%20on%20Linux.mp4"> 你的浏览器不支持 <code>video</code> 标签。 </video><h2 id="概念" tabindex="-1">概念 <a class="header-anchor" href="#概念" aria-label="Permalink to &quot;概念&quot;">​</a></h2><p>多节点集群由至少一个主节点和一个工作节点组成。您可以使用任何节点作为<strong>任务机</strong>来执行安装任务，也可以在安装之前或之后根据需要新增节点（例如，为了实现高可用性）。</p><ul><li><strong>Control plane node</strong>：主节点，通常托管控制平面，控制和管理整个系统。</li><li><strong>Worker node</strong>：工作节点，运行部署在工作节点上的实际应用程序。</li></ul><h2 id="步骤-1-准备-linux-主机" tabindex="-1">步骤 1：准备 Linux 主机 <a class="header-anchor" href="#步骤-1-准备-linux-主机" aria-label="Permalink to &quot;步骤 1：准备 Linux 主机&quot;">​</a></h2><p>请参见下表列出的硬件和操作系统要求。在本教程所演示多节点安装示例中，您需要按照下列要求准备至少三台主机。如果您节点的资源充足，也可以将 <a href="https://kubesphere.com.cn/" target="_blank" rel="noreferrer">KubeSphere 容器平</a>台安装在两个节点上。</p><h3 id="系统要求" tabindex="-1">系统要求 <a class="header-anchor" href="#系统要求" aria-label="Permalink to &quot;系统要求&quot;">​</a></h3><table><thead><tr><th>系统</th><th>最低要求（每个节点</th></tr></thead><tbody><tr><td><strong>Ubuntu</strong> 16.04，18.04，20.04</td><td>CPU：2 核，内存：4 G，硬盘：40 G</td></tr><tr><td><strong>Debian</strong> Buster，Stretch</td><td>CPU：2 核，内存：4 G，硬盘：40 G</td></tr><tr><td><strong>CentOS</strong> 7.x</td><td>CPU：2 核，内存：4 G，硬盘：40 G</td></tr><tr><td><strong>Red Hat Enterprise Linux</strong> 7</td><td>CPU：2 核，内存：4 G，硬盘：40 G</td></tr><tr><td><strong>SUSE Linux Enterprise Server</strong> 15 / <strong>openSUSE Leap</strong> 15.2</td><td>CPU：2 核，内存：4 G，硬盘：40 G</td></tr></tbody></table><div class="tip custom-block"><p class="custom-block-title">提示</p><ul><li>/var/lib/docker 路径主要用于存储容器数据，在使用和操作过程中数据量会逐渐增加。因此，在生产环境中，建议为 /var/lib/docker 单独挂载一个硬盘。</li><li>CPU 必须为 x86_64，暂时不支持 Arm 架构的 CPU。</li></ul></div><h3 id="节点要求" tabindex="-1">节点要求 <a class="header-anchor" href="#节点要求" aria-label="Permalink to &quot;节点要求&quot;">​</a></h3><ul><li>所有节点必须都能通过 SSH 访问。</li><li>所有节点时间同步。</li><li>所有节点都应使用 sudo/curl/openssl/tar。</li></ul><h3 id="容器运行时" tabindex="-1">容器运行时 <a class="header-anchor" href="#容器运行时" aria-label="Permalink to &quot;容器运行时&quot;">​</a></h3><p>您的集群必须有一个可用的容器运行时。如果您使用 KubeKey 搭建集群，KubeKey 会默认安装最新版本的 Docker。或者，您也可以在创建集群前手动安装 Docker 或其他容器运行时。</p><table><thead><tr><th>支持的容器运行时</th><th>版本</th></tr></thead><tbody><tr><td>Docker</td><td>19.3.8+</td></tr><tr><td>containerd</td><td>最新版</td></tr><tr><td>CRI-O（试验版，未经充分测试</td><td>最新版</td></tr><tr><td>iSula（试验版，未经充分测试）</td><td>最新版</td></tr></tbody></table><h3 id="依赖项要求" tabindex="-1">依赖项要求 <a class="header-anchor" href="#依赖项要求" aria-label="Permalink to &quot;依赖项要求&quot;">​</a></h3><p>KubeKey 可以一同安装 Kubernetes 和 KubeSphere。根据要安装的 Kubernetes 版本，需要安装的依赖项可能会不同。您可以参考下表，查看是否需要提前在节点上安装相关依赖项。</p><table><thead><tr><th>依赖项</th><th>Kubernetes 版本 ≥ 1.18</th><th>Kubernetes 版本 &lt; 1.18</th></tr></thead><tbody><tr><td>socat</td><td>必须</td><td>可选，但建议安装</td></tr><tr><td>conntrack</td><td>必须</td><td>可选，但建议安装</td></tr><tr><td>ebtables</td><td>可选，但建议安装</td><td>可选，但建议安装</td></tr><tr><td>ipset</td><td>可选，但建议安装</td><td>可选，但建议安装</td></tr></tbody></table><h3 id="网络和dns要求" tabindex="-1">网络和DNS要求 <a class="header-anchor" href="#网络和dns要求" aria-label="Permalink to &quot;网络和DNS要求&quot;">​</a></h3><ul><li>请确保 /etc/resolv.conf 中的 DNS 地址可用，否则，可能会导致集群中的 DNS 出现问题。</li><li>如果您的网络配置使用防火墙规则或安全组，请务必确保基础设施组件可以通过特定端口相互通信。建议您关闭防火墙。有关更多信息，请参见<a href="https://www.kubesphere.io/zh/docs/v3.3/installing-on-linux/introduction/port-firewall/" target="_blank" rel="noreferrer">端口要求</a>。</li><li>支持的 CNI 插件：Calico 和 Flannel。其他插件也适用（例如 Cilium 和 Kube-OVN 等），但请注意它们未经充分测试。</li></ul><div class="tip custom-block"><p class="custom-block-title">提示</p><ul><li>建议您使用干净的操作系统（即不安装任何其他软件）。否则，可能会产生冲突。</li><li>如果您从 dockerhub.io 下载镜像时遇到问题，建议提前准备仓库的镜像地址（即加速器）。请参见<a href="https://www.kubesphere.io/zh/docs/v3.3/faq/installation/configure-booster/" target="_blank" rel="noreferrer">为安装配置加速器</a>或<a href="https://docs.docker.com/registry/recipes/mirror/#configure-the-docker-daemon" target="_blank" rel="noreferrer">为 Docker Daemon 配置仓库镜像</a>。</li></ul></div><h2 id="步骤-2-下载-kubekey" tabindex="-1">步骤 2：下载 KubeKey <a class="header-anchor" href="#步骤-2-下载-kubekey" aria-label="Permalink to &quot;步骤 2：下载 KubeKey&quot;">​</a></h2><p>请按照以下步骤下载 <a href="https://www.kubesphere.io/zh/docs/v3.3/installing-on-linux/introduction/kubekey" target="_blank" rel="noreferrer">KubeKey</a>。</p><h3 id="如果你能访问github" tabindex="-1">如果你能访问GitHub <a class="header-anchor" href="#如果你能访问github" aria-label="Permalink to &quot;如果你能访问GitHub&quot;">​</a></h3><p>从 <a href="https://github.com/kubesphere/kubekey/releases" target="_blank" rel="noreferrer">GitHub Release Page</a> 下载 KubeKey 或者直接运行以下命令。</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">curl</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-sfL</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://get-kk.kubesphere.io</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> VERSION</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">v3.0.7</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">sh</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">-</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">curl</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-sfL</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://get-kk.kubesphere.io</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> VERSION</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">v3.0.7</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">sh</span><span style="color:#24292E;"> </span><span style="color:#032F62;">-</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">提示</p><p>通过以上的命令，可以下载 KubeKey 的最新版本。您可以更改命令中的版本号来下载特定的版本。</p></div><h3 id="如果你访问github受限" tabindex="-1">如果你访问GitHub受限 <a class="header-anchor" href="#如果你访问github受限" aria-label="Permalink to &quot;如果你访问GitHub受限&quot;">​</a></h3><p>首先运行以下命令，以确保您从正确的区域下载 KubeKey。</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> KKZONE</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">cn</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> KKZONE</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">cn</span></span></code></pre></div><p>运行以下命令来下载 KubeKey：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">curl</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-sfL</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://get-kk.kubesphere.io</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> VERSION</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">v3.0.7</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">sh</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">-</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">curl</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-sfL</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://get-kk.kubesphere.io</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> VERSION</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">v3.0.7</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">sh</span><span style="color:#24292E;"> </span><span style="color:#032F62;">-</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">提示</p><p>执行以上命令会下载最新版 KubeKey，您可以修改命令中的版本号下载指定版本。</p></div><p>为 kk 添加可执行权限：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">chmod</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">+x</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">kk</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">chmod</span><span style="color:#24292E;"> </span><span style="color:#032F62;">+x</span><span style="color:#24292E;"> </span><span style="color:#032F62;">kk</span></span></code></pre></div><h2 id="步骤-3-创建集群" tabindex="-1">步骤 3：创建集群 <a class="header-anchor" href="#步骤-3-创建集群" aria-label="Permalink to &quot;步骤 3：创建集群&quot;">​</a></h2><p>对于多节点安装，您需要通过指定配置文件来创建集群。</p><h3 id="_1-创建示例配置文件" tabindex="-1">1. 创建示例配置文件 <a class="header-anchor" href="#_1-创建示例配置文件" aria-label="Permalink to &quot;1. 创建示例配置文件&quot;">​</a></h3><p>命令如下：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">./kk</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">create</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">config</span><span style="color:#E1E4E8;"> [--with-kubernetes </span><span style="color:#9ECBFF;">version]</span><span style="color:#E1E4E8;"> [--with-kubesphere </span><span style="color:#9ECBFF;">version]</span><span style="color:#E1E4E8;"> [(-f </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">--file</span><span style="color:#E1E4E8;">) path]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">./kk</span><span style="color:#24292E;"> </span><span style="color:#032F62;">create</span><span style="color:#24292E;"> </span><span style="color:#032F62;">config</span><span style="color:#24292E;"> [--with-kubernetes </span><span style="color:#032F62;">version]</span><span style="color:#24292E;"> [--with-kubesphere </span><span style="color:#032F62;">version]</span><span style="color:#24292E;"> [(-f </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">--file</span><span style="color:#24292E;">) path]</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">提示</p><ul><li>安装 KubeSphere 3.3 的建议 Kubernetes 版本：v1.20.x、v1.21.x、* v1.22.x、* v1.23.x 和 * v1.24.x。带星号的版本可能出现边缘节点部分功能不可用的情况。因此，如需使用边缘节点，推荐安装 v1.21.x。如果不指定 Kubernetes 版本，KubeKey 将默认安装 Kubernetes v1.23.10。有关受支持的 Kubernetes 版本的更多信息，请参见<a href="https://www.kubesphere.io/zh/docs/v3.3/installing-on-linux/introduction/kubekey/#%e6%94%af%e6%8c%81%e7%9f%a9%e9%98%b5" target="_blank" rel="noreferrer">支持矩阵</a>。</li><li>如果您在此步骤的命令中不添加标志 --with-kubesphere，则不会部署 KubeSphere，只能使用配置文件中的 addons 字段安装，或者在您后续使用 ./kk create cluster 命令时再次添加这个标志。</li><li>如果您添加标志 --with-kubesphere 时不指定 KubeSphere 版本，则会安装最新版本的 KubeSphere。</li></ul></div><p>以下是一些示例，供您参考：</p><ul><li>您可以使用默认配置创建示例配置文件，也可以为该文件指定其他文件名或其他文件夹。</li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">./kk</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">create</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">config</span><span style="color:#E1E4E8;"> [-f </span><span style="color:#9ECBFF;">~/myfolder/abc.yaml]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">./kk</span><span style="color:#24292E;"> </span><span style="color:#032F62;">create</span><span style="color:#24292E;"> </span><span style="color:#032F62;">config</span><span style="color:#24292E;"> [-f </span><span style="color:#032F62;">~/myfolder/abc.yaml]</span></span></code></pre></div><ul><li>您可以指定要安装的 KubeSphere 版本（例如 --with-kubesphere v3.3.2）。</li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">./kk</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">create</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">config</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--with-kubesphere</span><span style="color:#E1E4E8;"> [version]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">./kk</span><span style="color:#24292E;"> </span><span style="color:#032F62;">create</span><span style="color:#24292E;"> </span><span style="color:#032F62;">config</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--with-kubesphere</span><span style="color:#24292E;"> [version]</span></span></code></pre></div><h3 id="_2-编辑配置文件" tabindex="-1">2. 编辑配置文件 <a class="header-anchor" href="#_2-编辑配置文件" aria-label="Permalink to &quot;2. 编辑配置文件&quot;">​</a></h3><p>如果您不更改名称，那么将创建默认文件 config-sample.yaml。编辑文件，以下是多节点集群（具有一个主节点）配置文件的示例。</p><div class="tip custom-block"><p class="custom-block-title">提示</p><p>若要自定义 Kubernetes 相关参数，请参考 <a href="https://www.kubesphere.io/zh/docs/v3.3/installing-on-linux/introduction/vars/" target="_blank" rel="noreferrer">Kubernetes 集群配置</a>。</p></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">spec:</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">  hosts:</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">  - {name: master, address: 192.168.0.2, internalAddress: 192.168.0.2, user: ubuntu, password: Testing123}</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">  - {name: node1, address: 192.168.0.3, internalAddress: 192.168.0.3, user: ubuntu, password: Testing123}</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">  - {name: node2, address: 192.168.0.4, internalAddress: 192.168.0.4, user: ubuntu, password: Testing123}</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">  roleGroups:</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">    etcd:</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">    - master</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">    control-plane:</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">    - master</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">    worker:</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">    - node1</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">    - node2</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">  controlPlaneEndpoint:</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">    domain: lb.kubesphere.local</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">    address: &quot;&quot;</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">    port: 6443</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">spec:</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">  hosts:</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">  - {name: master, address: 192.168.0.2, internalAddress: 192.168.0.2, user: ubuntu, password: Testing123}</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">  - {name: node1, address: 192.168.0.3, internalAddress: 192.168.0.3, user: ubuntu, password: Testing123}</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">  - {name: node2, address: 192.168.0.4, internalAddress: 192.168.0.4, user: ubuntu, password: Testing123}</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">  roleGroups:</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">    etcd:</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">    - master</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">    control-plane:</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">    - master</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">    worker:</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">    - node1</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">    - node2</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">  controlPlaneEndpoint:</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">    domain: lb.kubesphere.local</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">    address: &quot;&quot;</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">    port: 6443</span></span></code></pre></div><h4 id="主机" tabindex="-1">主机 <a class="header-anchor" href="#主机" aria-label="Permalink to &quot;主机&quot;">​</a></h4><p>请参照上方示例在 hosts 下列出您的所有机器并添加详细信息。</p><p>name：实例的主机名。</p><p>address：任务机和其他实例通过 SSH 相互连接所使用的 IP 地址。根据您的环境，可以是公有 IP 地址或私有 IP 地址。例如，一些云平台为每个实例提供一个公有 IP 地址，用于通过 SSH 访问。在这种情况下，您可以在该字段填入这个公有 IP 地址。</p><p>internalAddress：实例的私有 IP 地址。</p><p>此外，您必须提供用于连接至每台实例的登录信息，以下示例供您参考：</p><ul><li>使用密码登录示例：</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">hosts:</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">  - {name: master, address: 192.168.0.2, internalAddress: 192.168.0.2, port: 8022, user: ubuntu, password: Testing123}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">hosts:</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">  - {name: master, address: 192.168.0.2, internalAddress: 192.168.0.2, port: 8022, user: ubuntu, password: Testing123}</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">备注</p><p>在本教程中，端口 22 是 SSH 的默认端口，因此您无需将它添加至该 YAML 文件中。否则，您需要在 IP 地址后添加对应端口号，如上所示。</p></div><ul><li>默认 root 用户示例：</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">hosts:</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">  - {name: master, address: 192.168.0.2, internalAddress: 192.168.0.2, password: Testing123}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">hosts:</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">  - {name: master, address: 192.168.0.2, internalAddress: 192.168.0.2, password: Testing123}</span></span></code></pre></div><ul><li>使用 SSH 密钥的无密码登录示例：</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">hosts:</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">  - {name: master, address: 192.168.0.2, internalAddress: 192.168.0.2, privateKeyPath: &quot;~/.ssh/id_rsa&quot;}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">hosts:</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">  - {name: master, address: 192.168.0.2, internalAddress: 192.168.0.2, privateKeyPath: &quot;~/.ssh/id_rsa&quot;}</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">备注</p><ul><li>在安装 KubeSphere 之前，您可以使用 hosts 下提供的信息（例如 IP 地址和密码）通过 SSH 的方式测试任务机和其他实例之间的网络连接。</li><li>在安装前，请确保端口 6443 没有被其他服务占用，否则在安装时会产生冲突（6443 为 API 服务器的默认端口）。</li></ul></div><h4 id="rolegroups" tabindex="-1">roleGroups <a class="header-anchor" href="#rolegroups" aria-label="Permalink to &quot;roleGroups&quot;">​</a></h4><ul><li>etcd：etcd 节点名称</li><li>worker：工作节点名称</li><li>control-plane：主节点名称</li></ul><h4 id="controlplaneendpoint-仅适用于高可用安装" tabindex="-1">controlPlaneEndpoint（仅适用于高可用安装） <a class="header-anchor" href="#controlplaneendpoint-仅适用于高可用安装" aria-label="Permalink to &quot;controlPlaneEndpoint（仅适用于高可用安装）&quot;">​</a></h4><p>您需要在 controlPlaneEndpoint 部分为高可用集群提供外部负载均衡器信息。当且仅当您安装多个主节点时，才需要准备和配置外部负载均衡器。请注意，config-sample.yaml 中的地址和端口应缩进两个空格，address 应为您的负载均衡器地址。有关详细信息，请参见<a href="https://www.kubesphere.io/zh/docs/v3.3/installing-on-linux/high-availability-configurations/ha-configuration/" target="_blank" rel="noreferrer">高可用配置</a>。</p><h4 id="addons" tabindex="-1">addons <a class="header-anchor" href="#addons" aria-label="Permalink to &quot;addons&quot;">​</a></h4><p>您可以在 config-sample.yaml 的 addons 字段下指定存储，从而自定义持久化存储插件，例如 NFS 客户端、Ceph RBD、GlusterFS 等。有关更多信息，请参见<a href="https://www.kubesphere.io/zh/docs/v3.3/installing-on-linux/persistent-storage-configurations/understand-persistent-storage/" target="_blank" rel="noreferrer">持久化存储配置</a>。</p><p>KubeSphere 会默认安装 <a href="https://openebs.io/" target="_blank" rel="noreferrer">OpenEBS</a>，为开发和测试环境配置 <a href="https://kubernetes.io/docs/concepts/storage/volumes/#local" target="_blank" rel="noreferrer">LocalPV</a>，方便新用户使用。在本多节点安装示例中，使用了默认存储类型（本地存储卷）。对于生产环境，您可以使用 Ceph/GlusterFS/CSI 或者商业存储产品作为持久化存储解决方案。</p><div class="tip custom-block"><p class="custom-block-title">提示</p><ul><li>您可以编辑配置文件，启用多集群功能。有关更多信息，请参见<a href="https://www.kubesphere.io/zh/docs/v3.3/multicluster-management/" target="_blank" rel="noreferrer">多集群管理</a>。</li><li>您也可以选择要安装的组件。有关更多信息，请参见<a href="https://www.kubesphere.io/zh/docs/v3.3/pluggable-components/" target="_blank" rel="noreferrer">启用可插拔组件</a>。有关完整的 config-sample.yaml 文件的示例，请参见<a href="https://github.com/kubesphere/kubekey/blob/release-2.2/docs/config-example.md" target="_blank" rel="noreferrer">此文件</a>。</li></ul></div><p>完成编辑后，请保存文件。</p><h3 id="_3-使用配置文件创建集群" tabindex="-1">3. 使用配置文件创建集群 <a class="header-anchor" href="#_3-使用配置文件创建集群" aria-label="Permalink to &quot;3. 使用配置文件创建集群&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">./kk</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">create</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">cluster</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">config-sample.yaml</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">./kk</span><span style="color:#24292E;"> </span><span style="color:#032F62;">create</span><span style="color:#24292E;"> </span><span style="color:#032F62;">cluster</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">config-sample.yaml</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">提示</p><p>如果使用其他名称，则需要将上面的 config-sample.yaml 更改为您自己的文件。</p></div><p>整个安装过程可能需要 10 到 20 分钟，具体取决于您的计算机和网络环境。</p><h3 id="_4-验证安装" tabindex="-1">4. 验证安装 <a class="header-anchor" href="#_4-验证安装" aria-label="Permalink to &quot;4. 验证安装&quot;">​</a></h3><p>安装完成后，您会看到如下内容：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">#####################################################</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">###              Welcome to KubeSphere!           ###</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">#####################################################</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">Console: http://192.168.0.2:30880</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">Account: admin</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">Password: P@88w0rd</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">NOTES：</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">  1. After you log into the console, please check the</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">     monitoring status of service components in</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">     the &quot;Cluster Management&quot;. If any service is not</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">     ready, please wait patiently until all components</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">     are up and running.</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">  2. Please change the default password after login.</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">#####################################################</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">https://kubesphere.io             20xx-xx-xx xx:xx:xx</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">#####################################################</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">#####################################################</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">###              Welcome to KubeSphere!           ###</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">#####################################################</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">Console: http://192.168.0.2:30880</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">Account: admin</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">Password: P@88w0rd</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">NOTES：</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">  1. After you log into the console, please check the</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">     monitoring status of service components in</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">     the &quot;Cluster Management&quot;. If any service is not</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">     ready, please wait patiently until all components</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">     are up and running.</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">  2. Please change the default password after login.</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">#####################################################</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">https://kubesphere.io             20xx-xx-xx xx:xx:xx</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">#####################################################</span></span></code></pre></div></div></div></main><footer class="VPDocFooter" data-v-6e18ff79 data-v-a763a845><!--[--><!--]--><div class="edit-info" data-v-a763a845><!----><div class="last-updated" data-v-a763a845><p class="VPLastUpdated" data-v-a763a845 data-v-cb1d03e5>Last updated: <time datetime="2023-09-04T08:46:45.000Z" data-v-cb1d03e5></time></p></div></div><nav class="prev-next" data-v-a763a845><div class="pager" data-v-a763a845><a class="pager-link prev" href="/docs/views/k8s/kubekey" data-v-a763a845><span class="desc" data-v-a763a845>Previous page</span><span class="title" data-v-a763a845>KubeKey简介</span></a></div><div class="pager" data-v-a763a845><a class="pager-link next" href="/docs/views/k8s/booster" data-v-a763a845><span class="desc" data-v-a763a845>Next page</span><span class="title" data-v-a763a845>配置加速器</span></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-8ec523c0 data-v-91c61524><div class="container" data-v-91c61524><p class="message" data-v-91c61524>浙ICP备2023015674号</p><p class="copyright" data-v-91c61524>Copyright © 2023-Tomxuetao</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"index.md\":\"499889aa\",\"views_k8s_index.md\":\"67ac95f4\",\"views_k8s_booster.md\":\"0d31f626\",\"views_k8s_kubekey.md\":\"ae90dbb9\",\"views_k8s_multi-node.md\":\"0822457a\",\"views_k8s_cluster-config.md\":\"4b023afa\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"Tomxuetao\",\"description\":\"前端文档|JavaScript|WebGIS|地图|K8s\",\"base\":\"/docs/\",\"head\":[],\"appearance\":true,\"themeConfig\":{\"logo\":\"/favicon.webp\",\"nav\":[{\"text\":\"前端基础\",\"link\":\"/views/front\"},{\"text\":\"Vue相关\",\"link\":\"/views/vue\"},{\"text\":\"WebGIS\",\"link\":\"/views/gis\"},{\"text\":\"请求工具\",\"link\":\"/views/axios\"},{\"text\":\"K8s搭建\",\"link\":\"/views/k8s/kubekey\",\"activeMatch\":\"^/views/k8s/\"}],\"sidebar\":{\"/views/k8s/\":[{\"text\":\"KubeKey\",\"items\":[{\"text\":\"KubeKey简介\",\"link\":\"/views/k8s/kubekey\"},{\"text\":\"多节点安装\",\"link\":\"/views/k8s/multi-node\"},{\"text\":\"配置加速器\",\"link\":\"/views/k8s/booster\"},{\"text\":\"K8s集群配置\",\"link\":\"/views/k8s/cluster-config\"}]},{\"text\":\"Kubeadm\",\"items\":[{\"text\":\"Kubeadm简介\",\"link\":\"/views/k8s//index\"},{\"text\":\"快速上手\",\"link\":\"/views/k8s//quick-start\"}]}]},\"search\":{\"provider\":\"local\"},\"footer\":{\"message\":\"浙ICP备2023015674号\",\"copyright\":\"Copyright © 2023-Tomxuetao\"},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/Tomxuetao\"}]},\"locales\":{},\"scrollOffset\":90,\"cleanUrls\":true}");</script>
    
  </body>
</html>